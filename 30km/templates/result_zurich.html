{% extends "base.html" %}

{% block title %}City Tool Result - 30km City{% endblock %}

{% block navbar_class %}navbar-result{% endblock %}

{% block footer_class %}footer-black{% endblock %}

{% block content %}

<!-- Hero2 section — DO NOT TOUCH -->
<section class="hero2-section">
  <h1 class="hero2-title">Your inspiration match:</h1>
  <div class="hero-result">Zurich</div>
</section>

<!-- Body3 section -->
<section class="body3-section">

  <!-- Left side: Image and Description -->
  <div class="photo-space">
    <img src="{{ url_for('static', filename='images/zurich_1.jpg') }}" alt="Zurich city photo">
  </div>  
  <h2 class="body3-city-name">Zurich</h2>
  <p class="body3-description">
    A strategic and step-by-step approach city focused on quality of life and noise reduction.
  </p>

  <!-- Right side: Characteristics + Parameters -->
  <h3 class="body3-title">City characteristics:</h3>

  <div class="body3-parameters">
    <!-- Text -->
    <div class="parameters-text">
      City size: Medium<br>
      Population density: High<br>
      Transport accessibility: Very High<br>
      Cycling infrastructure: Extensive<br>
      Street layout: Mixed-width<br>
      Tourism levels: Medium<br>
      Car ownership: Low<br>
      Traffic: Medium 
    </div>

    <!-- Icons -->
    <img src="/static/icons/size.svg" class="icon-size" alt="Icon size">
    <img src="/static/icons/people.svg" class="icon-people" alt="Icon people">
    <img src="/static/icons/transport.svg" class="icon-transport" alt="Icon transport">
    <img src="/static/icons/cycling.svg" class="icon-cycling" alt="Icon cycling">
    <img src="/static/icons/street_layout.svg" class="icon-street" alt="Icon street">
    <img src="/static/icons/tourism.svg" class="icon-tourism" alt="Icon tourism">
    <img src="/static/icons/car_ownership.svg" class="icon-car" alt="Icon car ownership">
    <img src="/static/icons/traffic_white.svg" class="icon-traffic" alt="Icon traffic">
  </div>

  <p class="match-accuracy">Match accuracy:</p>
  <div class="match-accuracy-number">{{ accuracy }}%</div>
  <p class="match-explanation">
    The match percentage reflects how closely a city aligns with predefined categories. It should be seen as an indicative accuracy score rather than a representation of real-world data.
  </p>

  <div class="body3-section">
    <div class="body3-content">
      <!-- all your .photo-space, .body3-city-name etc. -->
    </div>
  </div>
  
  <section class="city-links-section">
    <h2 class="city-links-title">Explore All City Profiles</h2>
    <div class="city-links">
      <a href="{{ url_for('result_amsterdam') }}">Amsterdam</a>
      <a href="{{ url_for('result_oslo') }}">Oslo</a>
      <a href="{{ url_for('result_munich') }}">Munich</a>
      <a href="{{ url_for('result_madrid') }}">Madrid</a>
      <a href="{{ url_for('result_ghent') }}">Ghent</a>
      <a href="{{ url_for('result_copenhagen') }}">Copenhagen</a>
      <a href="{{ url_for('result_paris') }}">Paris</a>
      <a href="{{ url_for('result_brussels') }}">Brussels</a>
      <a href="{{ url_for('result_zurich') }}">Zurich</a>
      <a href="{{ url_for('result_bilbao') }}">Bilbao</a>
      <a href="{{ url_for('result_helsinki') }}">Helsinki</a>
    </div>
  </section>

  <div class="white-block">
    <div class="content-wrapper">
      <div class="left-content">
        <!-- Left side content -->
        <h2 class="section-title">Why this city hit the brakes?</h2>
        <p class="section-text">
          The largest city in Switzerland with a population of about 440.000, a compact urban structure with active integration of public transport and pedestrian environment.<br><br>
          Period of policy implementation: from 2021 to 2030.
        </p>
        <div class="frame-result">
          <p class="body4-list">
            The aim was to: <br>
            1. Reduce noise <br>
            2. Improve quality of life
          </p>
        </div>
      </div>
  
      <div class="right-content">
        <!-- Right side content -->
        <h2 class="takeaways-title">Key takeaways and lessons learned</h2>
        <p class="takeaways-text">
          <strong>Flexible speed limit approach:</strong> allows exceptions for main roads that connect the city with neighbouring regions, only night-time restrictions on some roads - as a compromise between different groups of citizens.  <br><br>
        <strong>Stage-by-stage introduction </strong> of speed limits allows one to assess the effectiveness of measures and adapt them depending on the needs of the city. Integration with public transport: Taking into account the impact of speed limits on public transport helps to avoid negative consequences, such as increased travel times.  <br><br>
        <strong>Public support:</strong> surveys and referendums increase the likelihood of support for new urban planning measures. 
        </p>
      </div>
      
      <div class="line-9"></div>

<div class="body5-section">
    <h2 class="body5-title">Countdown to 30: What It Took to Prepare</h2>
        
        <div class="body5-content">
        <div class="body5-icons"> 
            <img src="/static/icons/30_green.svg" alt="Infrastructure Upgrades" class="body5-icon">
            <img src="/static/icons/pilot_project.svg" alt="Pilot Project" class="body5-icon">
        </div>
        <div class="body5-text">
            <p class="p4"><strong>Early implementation:</strong> Started introducing 30 km/h zones in residential areas in 1991.</p>

            <p class="p4"><strong>Pilot project:</strong> Between 2010 and 2012, night-time speed limits were tested on 400 km of roads.</p>

        </div>
        </div>
    </div>

</div>
  </div>
  

</section>
<section class="h10-section">
  <div class="h10-top">
    <div class="h10-text">
      <h2 class="h10-title">From Numbers to Neighbourhoods: Implementation</h2>
      <p class="h10-description">
      <strong>Expanded coverage:</strong> By 2021, 30 km/h applied to 370 km of Zurich's 680 km road network. <br><br>

      <strong>Democratic approval:</strong> In 2021, residents approved a referendum to extend the zones further. <br><br>

      <strong>Future plans:</strong> By 2030, 30 km/h will be extended to 120 km of additional roads, plus 30 km of night-only zones. <br><br>

      <strong>Public support:</strong> 59% of older people and 54% of women support the introduction of 30 km/h speed limits in cities. <br><br>

      </p>
    </div>
    <div class="h10-icon">
      <img src="{{ url_for('static', filename='icons/transportation.svg') }}" alt="Motorbike Icon">
    </div>
  </div>

  <hr class="h10-divider">
  <br>
  <br>
  <br> 

  <h3 class="h10-subtitle">Slower, Safer, Better?</h3>
  <br>
  <br>
  <br> 
  
 <div class="h10-grid">
  <div class="h10-item">
    <img src="{{ url_for('static', filename='icons/30.svg') }}" alt="30 icon">
    <p class="p12">Noise Reduction</p>
    <p class="p13">
      After introducing 30 km/h limits on 400 km of roads, Zurich experienced a drop in traffic noise by 2.4 dB(A) during the day and up to 4.5 dB(A) at night—cutting perceived noise nearly in half. This has had a measurable impact on sleep quality, especially for residents living along busy corridors, and contributes to an overall calmer city atmosphere.
    </p>
  </div>

  <div class="h10-item">
    <img src="{{ url_for('static', filename='icons/community.svg') }}" alt="Community icon">
    <p class="p12">Improved Safety</p>
    <p class="p13">
      Residents have reported a greater sense of safety on the streets, particularly among pedestrians and cyclists. Lower speeds have reduced the number of dangerous situations at crossings and intersections. The step-by-step introduction of zones allowed the city to adapt based on real-life outcomes and neighborhood-specific needs.
    </p>
  </div>

  <div class="h10-item">
    <img src="{{ url_for('static', filename='icons/people.svg') }}" alt="Support icon">
    <p class="p12">Broad Public Support</p>
    <p class="p13">
      A city-wide survey revealed strong backing for the policy: 59% of older residents and 54% of women support the introduction of 30 km/h zones. The policy was also approved by public referendum, showing that quieter, safer streets are not just a planning goal—but a community demand.
    </p>
  </div>
</div>
</section>

<section class="references-section">
  <h3 class="references-title">
    The following guidance documents can support governments in the design and implementation of traffic calming
    measures:
  </h3>

  <div class="sources-frame">
    <p3>
      Goals and actions taken: 
      <a href="https://www.eea.europa.eu/publications/outlook-to-2030/reduction-to-30-km-h" target="_blank">
        Reduction to 30km/h speed limits in Zurich, Switzerland
      </a> 
    </p>
    <p3>
      Public opinion
      <a href="https://istp.ethz.ch/news/2024/01/individual-carbon-footprints-a-key-to-equitable-climate-policy1.html" target="_blank">
        Speed limit 30 in Swiss cities - What do Swiss residents want?
      </a> 
    </p>
    <p3>
      Outputs: noise reduction
      <a href="https://www.sciencedirect.com/science/article/pii/S0160412022005785" target="_blank">
        Lowering urban speed limits to 30 km/h reduces noise annoyance and shifts exposure–response relationships: Evidence from a field study in Zurich
      </a> 
    </p>
  </div>
</section>


{% endblock %}

{% block scripts %}
<script>
    // Check sessionStorage for city scores
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Checking sessionStorage for city scores...');
        const cityScores = JSON.parse(sessionStorage.getItem('cityScores') || '[]');
        console.log('City scores from sessionStorage:', cityScores);
        const cityName = '{{ city_name }}';
        console.log('Current city name:', cityName);
        const score = cityScores.find(s => s.city.toLowerCase() === cityName);
        console.log('Found score:', score);
        if (score) {
            const accuracyElement = document.querySelector('.match-accuracy-number');
            console.log('Accuracy element found:', !!accuracyElement);
            if (accuracyElement) {
                const accuracy = Math.round(score.similarity * 100);
                console.log('Setting accuracy to:', accuracy + '%');
                accuracyElement.textContent = accuracy + '%';
            }
        }
    });
</script>
{% endblock %}